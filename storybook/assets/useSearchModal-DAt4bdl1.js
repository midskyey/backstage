import{j as e}from"./jsx-runtime-CvpxdxdE.js";import{d as v}from"./ArrowForward-CYfBf57d.js";import{d as C}from"./Close-Ddy51yDY.js";import{r as a}from"./index-DSHF18-l.js";import{r as M}from"./plugin-BD3ZwANF.js";import{m as g}from"./makeStyles-yUUo8jj4.js";import{D as j,a as I,b as w,c as P}from"./DialogTitle-4Ny0TCxB.js";import{u as k,S as R}from"./SearchContext-BYBNj33Q.js";import{d as T,u as N}from"./index-CEhUYg2U.js";import{u as _}from"./useTheme-DT5kHe_T.js";import{u as q}from"./Page-Bz2G8IWi.js";import{B as A}from"./Box-CBL4LtOb.js";import{SearchBar as F}from"./SearchBar-Ph5bpNT8.js";import{I as $}from"./IconButton-BIutHE4K.js";import{S as p}from"./Grid-BY2EZ_z9.js";import{B as f}from"./Button-D0WAjAiu.js";import{D}from"./Divider-CQVpOw77.js";import{a as E}from"./SearchResult-20m0Psxr.js";import{d as B}from"./ArrowBackIos-Cw3InTVe.js";import{d as V}from"./ArrowForwardIos-DoL3vk7F.js";import{u as W}from"./useRouteRef-clHAB9KK.js";import{b as J}from"./ApiRef-DDVPwL0h.js";import{a as K}from"./ConfigApi-1QFqvuIK.js";const X=g(t=>({root:{display:"flex",justifyContent:"space-between",gap:t.spacing(2),margin:t.spacing(2,0)}})),x=()=>{const{fetchNextPage:t,fetchPreviousPage:n}=k(),o=X();return!t&&!n?e.jsx(e.Fragment,{}):e.jsxs("nav",{"aria-label":"pagination navigation",className:o.root,children:[e.jsx(f,{"aria-label":"previous page",disabled:!n,onClick:n,startIcon:e.jsx(B,{}),children:"Previous"}),e.jsx(f,{"aria-label":"next page",disabled:!t,onClick:t,endIcon:e.jsx(V,{}),children:"Next"})]})};x.__docgenInfo={description:"@public",methods:[],displayName:"SearchResultPager"};const S=g(t=>({dialogTitle:{gap:t.spacing(1),display:"grid",alignItems:"center",gridTemplateColumns:"1fr auto","&> button":{marginTop:t.spacing(1)}},input:{flex:1},button:{"&:hover":{background:"none"}},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:t.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),b=({toggleModal:t,resultItemComponents:n})=>{const o=S(),l=T(),{transitions:c}=_(),{focusContent:s}=q(),i=W(M)(),u=a.useRef(null);a.useEffect(()=>{var r;(r=u==null?void 0:u.current)==null||r.focus()});const d=a.useCallback(()=>{setTimeout(s,c.duration.leavingScreen)},[s,c]),h=a.useCallback(()=>{var m;const r=((m=u.current)==null?void 0:m.value)??"";l(`${i}?query=${r}`),d()},[l,d,i]);return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsxs(A,{className:o.dialogTitle,children:[e.jsx(F,{className:o.input,inputProps:{ref:u},onSubmit:h}),e.jsx($,{"aria-label":"close",onClick:t,children:e.jsx(C,{})})]})}),e.jsxs(w,{children:[e.jsx(p,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center",children:e.jsx(p,{item:!0,children:e.jsx(f,{className:o.button,color:"primary",endIcon:e.jsx(v,{}),onClick:h,disableRipple:!0,children:"View Full Results"})})}),e.jsx(D,{}),e.jsx(E,{onClick:d,onKeyDown:d,children:n})]}),e.jsx(P,{className:o.dialogActionsContainer,children:e.jsx(p,{container:!0,direction:"row",children:e.jsx(p,{item:!0,xs:12,children:e.jsx(x,{})})})})]})},L=t=>{const{open:n=!0,hidden:o,toggleModal:l,children:c,resultItemComponents:s}=t,i=S();return e.jsx(j,{classes:{paperFullWidth:i.paperFullWidth},onClose:l,"aria-label":"Search Modal","aria-modal":"true",fullWidth:!0,maxWidth:"lg",open:n,hidden:o,children:n&&e.jsx(R,{inheritParentContextIfAvailable:!0,children:(c&&c({toggleModal:l,resultItemComponents:s||[]}))??e.jsx(b,{toggleModal:l,resultItemComponents:s})})})};b.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{toggleModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"A function that should be invoked when navigating away from the modal."},resultItemComponents:{required:!1,tsType:{name:"union",raw:`| ReactNode
| ((resultSet: SearchResultSet) => JSX.Element)`,elements:[{name:"ReactNode"},{name:"unknown"}]},description:"Ability to provide custom components to render the result items"}}};L.__docgenInfo={description:"@public",methods:[],displayName:"SearchModal",props:{open:{required:!1,tsType:{name:"boolean"},description:"If true, it renders the modal."},hidden:{required:!1,tsType:{name:"boolean"},description:"This is supposed to be used together with the open prop.\nIf `hidden` is true, it hides the modal.\nIf `open` is false, the value of `hidden` has no effect on the modal.\nUse `open` for controlling whether the modal should be rendered or not."},toggleModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:`a function invoked when a search item is pressed or when the dialog
should be closed.`},children:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: SearchModalChildrenProps) => JSX.Element",signature:{arguments:[{type:{name:"SearchModalChildrenProps"},name:"props"}],return:{name:"JSX.Element"}}},description:`A function that returns custom content to render in the search modal in
place of the default.`},resultItemComponents:{required:!1,tsType:{name:"SearchModalChildrenProps['resultItemComponents']",raw:"SearchModalChildrenProps['resultItemComponents']"},description:"Optional ability to pass in result item component renderers."}}};function O(){var t=a.useRef(!0);return t.current?(t.current=!1,!0):t.current}var U=function(t,n){var o=O();a.useEffect(function(){if(!o)return t()},n)};const y=J("search-modal-context"),G=t=>{const n=z(t.showInitially),o=K({1:n});return e.jsx(y.Provider,{value:o,children:t.children})};function z(t=!1){const[n,o]=a.useState({hidden:!t,open:t}),l=a.useCallback(()=>o(r=>({open:!0,hidden:!r.hidden})),[]),c=a.useCallback(r=>o(m=>({open:m.open||r,hidden:!r})),[]),s=a.useContext(y),i=s==null?void 0:s.atVersion(1),u=!!(i!=null&&i.state),d=N(),h=`${d.pathname}${d.search}${d.hash}`;return U(()=>{o(r=>({open:r.open,hidden:!0}))},[h]),u?i:{state:n,toggleModal:l,setOpen:c}}G.__docgenInfo={description:`A context provider responsible for storing and managing state related to the
search modal.

@remarks
If you need to control visibility of the search toggle outside of the modal
itself, you can optionally place this higher up in the react tree where your
custom code and the search modal share the same context.

@example
\`\`\`tsx
import {
  SearchModalProvider,
  SidebarSearchModal,
} from '@backstage/plugin-search';

// ...

<SearchModalProvider>
  <KeyboardShortcutSearchToggler />
  <SidebarSearchModal>
    {({ toggleModal }) => <SearchModal toggleModal={toggleModal} />}
  </SidebarSearchModal>
</SearchModalProvider>
\`\`\`

@public`,methods:[],displayName:"SearchModalProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:`Children which should have access to the SearchModal context and the
associated useSearchModal() hook.`},showInitially:{required:!1,tsType:{name:"boolean"},description:"Pass true if the modal should be rendered initially."}}};export{L as S,x as a,G as b,z as u};
